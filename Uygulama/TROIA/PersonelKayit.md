--> SEARCH  
SELECT * FROM EDUT1911TABLEPERS
WHERE
PERSNAME LIKE CP(SCPERSNAME) AND 
PERSSURNAME LIKE CP(SCPERSSURNAME) AND 
DEPARTMENT LIKE CP(SCDEPARTMENT) AND 
CITY LIKE CP(SCCITY)
ORDERBY PERSID;


//ENABLE - DISABLE 
IF NOTSELECTED THEN
    SET SHOW TO DISABLE;
    SET NEW TO DISABLE;
    SET DELETE TO DISABLE;
    SET CHANGE TO DISABLE;
ELSE 
    SET SHOW TO ENABLE;
    SET NEW TO ENABLE;
    SET DELETE TO ENABLE;
    SET CHANGE TO ENABLE;
ENDIF;


--> SHOW 
MODI = 2;
//EĞER SATIR SECILDIYSE ICERI DILOGU CAGIR.
MSG  = 'Satır Seçmediniz !';


IF SELECTED == 1 THEN 
      CALL DIALOG EDUT1911DPERSONEL02;
      ELSE 
      MESSAGE EDU W1911 WITH MSG;
ENDIF;



--> NEW
MODI =0;
COPYR=EDUT1911TABLEPERS_SELECTED;
CALL DIALOG EDUT1911DPERSONEL02;


--> CHANGE 
//CHANGE
MODI = 1;
MSG  = 'Satır Seçmediniz!';
IF SELECTED == 1 THEN 
CALL DIALOG EDUT1911DPERSONEL02;
ELSE 
MESSAGE EDU W1911 WITH MSG;
ENDIF;


--> DELETE 
BEGINTRAN;

DELETE FROM EDUT1911TABLEPERS 
WHERE PERSID = EDUT1911TABLEPERS_PERSID;

IF SYS_STATUS == 1 THEN 
ROLLBACKTRAN;
MESSAGE BAS E2000 WITH 'VERİ SİLERKEN HATA OLUŞTU.'
RETURN;
ENDIF;
MESSAGE BAS I2000 WITH 'SATIR SİLİNDİ';
COMMITTRAN;

THIS.SEARCH();


--> SAVE 

BEGINTRAN;

LOOP AT EDUT1911TABLEPERS WHERE EDUT1911TABLEPERS_INSERTED == 1 || EDUT1911TABLEPERS_UPDATED == 1 || EDUT1911TABLEPERS_DELETED == 1
BEGIN 
IF EDUT1911TABLEPERS_INSERTED == 1 && EDUT1911TABLEPERS_DELETED == 0 THEN 
    INSERT INTO EDUT1911TABLEPERS;
    IF SYS_STATUS == 1 THEN 
    ROLLBACKTRAN;
    MESSAGE BAS E2000 WITH 'VERİ EKLERKEN HATA OLUSTU.';
    RETURN;
    ELSE 
    MESSAGE BAS I2000 WITH 'VERİ EKLENDİ';
    EDUT1911TABLEPERS_INSERTED = 0;
    ENDIF;
ENDIF;

IF EDUT1911TABLEPERS_UPDATED == 1 && EDUT1911TABLEPERS_DELETED == 0 THEN 
    UPDATE EDUT1911TABLEPERS 
    WHERE PERSID = EDUT1911TABLEPERS_PERSID;
    IF SYS_STATUS == 1 THEN 
    ROLLBACKTRAN;
    MESSAGE BAS E2000 WITH 'VERİ GUNCELLERKEN HATA OLUSTU';
    RETURN;
    ELSE 
    MESSAGE BAS I2000 WITH 'VERI GUNCELLENDI';
    EDUT1911TABLEPERS_UPDATED = 0;
    ENDIF;
ENDIF;

IF EDUT1911TABLEPERS_DELETED == 1 && EDUT1911TABLEPERS=READED == 1 THEN
    DELETE FROM EDUT1911TABLEPERS
    WHERE PERSID = EDUT1911TABLEPERS_PERSID;
    IF SYS_STATUS == 1 THEN 
    ROLLBACKTRAN;
    MESSAGE BAS E2000 WITH 'VERI SİLERKEN HATA OLUSTU';
    RETURN;
    ELSE 
    MESSAGE BAS I2000 WITH 'VERI SILINDI';
    ENDIF;
ENDIF;
ENDLOOP;
COMMITTRAN;
MESSAGE BAS I2000 WITH 'İŞLEM TAMAMLANDI.';
THIS.SEARCH();





























